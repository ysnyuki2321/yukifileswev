"use strict";exports.id=1812,exports.ids=[1812],exports.modules={14898:(e,t,r)=>{function a(){return[{id:"debug-file-1",original_name:"presentation.pdf",file_size:2621440,share_token:"debug-share-1",created_at:new Date(Date.now()-1728e5).toISOString(),is_public:!0,user_id:"debug-user-123"},{id:"debug-file-2",original_name:"screenshot.png",file_size:1258291.2,share_token:"debug-share-2",created_at:new Date(Date.now()-864e5).toISOString(),is_public:!1,user_id:"debug-user-123"},{id:"debug-file-3",original_name:"document.docx",file_size:512e3,share_token:"debug-share-3",created_at:new Date(Date.now()-2592e5).toISOString(),is_public:!0,user_id:"debug-user-123"},{id:"debug-file-4",original_name:"video.mp4",file_size:0x3200000,share_token:"debug-share-4",created_at:new Date(Date.now()-432e6).toISOString(),is_public:!1,user_id:"debug-user-123"}]}function i(){return{totalUsers:156,totalFiles:892,totalTransactions:45,pendingTransactions:3,suspiciousIPs:12,totalStorageUsed:2528876743884.8,recentUsers:[{email:"user1@example.com",created_at:new Date(Date.now()-36e5).toISOString()},{email:"user2@example.com",created_at:new Date(Date.now()-72e5).toISOString()},{email:"user3@example.com",created_at:new Date(Date.now()-108e5).toISOString()}],recentTransactions:[{id:"tx-1",amount:1,status:"completed",created_at:new Date(Date.now()-36e5).toISOString()},{id:"tx-2",amount:.001,status:"pending",created_at:new Date(Date.now()-72e5).toISOString()}]}}r.d(t,{Pf:()=>i,Zm:()=>a})},22792:(e,t,r)=>{r.d(t,{C:()=>i});var a=r(54524);let i=(0,a.createServerReference)("005bd5b1efeb88d36ab0f467ace01f0a3068f30be9",a.callServer,void 0,a.findSourceMapURL,"signOut")},32063:(e,t,r)=>{r.r(t),r.d(t,{"005bd5b1efeb88d36ab0f467ace01f0a3068f30be9":()=>g,"40aca6f34dda9ee9328ad2d87ff81ca62a58ff21cb":()=>l,"40dca538ace24181507799deb34f98758d7024e7e2":()=>f,"6006a75935538ffda01ac23a336913393062bde9e5":()=>c,"60a2541c447397bdff2adcda1aa27d6fda140e754e":()=>u});var a=r(19660);r(73434);var i=r(86504),n=r(8763);async function s(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,t=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t)return console.warn("[Server Client] Supabase environment variables not found"),null;try{let r=await (0,n.UL)();return(0,i.createServerClient)(e,t,{cookies:{get:e=>r.get(e)?.value,set(e,t,a){try{r.set(e,t,a)}catch{}},remove(e,t){try{r.set(e,"",{...t,maxAge:0})}catch{}}}})}catch(e){return console.error("[Server Client] Error creating Supabase client:",e),null}}var o=r(90946);function d(){if(process.env.NEXT_PUBLIC_SITE_URL)return process.env.NEXT_PUBLIC_SITE_URL;if(process.env.VERCEL_URL)return`https://${process.env.VERCEL_URL}`;try{let e=(0,n.b3)(),t=e.get("host"),r=e.get("x-forwarded-proto")||"http";if(t)return`${r}://${t}`}catch(e){console.warn("Could not get site URL from headers:",e)}return"http://localhost:3000"}async function u(e,t){let r=await s();if(!r)return{error:"Database connection failed"};try{let{error:a,data:i}=await r.auth.signInWithPassword({email:e,password:t});if(a)return{error:a.message};if(i.user&&!i.user.email_confirmed_at)return await r.auth.signOut(),{error:"Please verify your email first! We sent you a confirmation link.",code:"EMAIL_NOT_VERIFIED"};return i.user&&(console.log(`[v0] User ${i.user.email} logged in successfully`),await r.from("users").update({last_login:new Date().toISOString(),login_count:r.rpc("increment",{row_id:i.user.id})}).eq("email",i.user.email)),{success:!0}}catch(e){return console.error("Login error:",e),{error:"An unexpected error occurred. Please try again."}}}async function c(e,t){if(!t)return{error:"Form data is missing"};let r=t.get("email"),a=t.get("password"),i=t.get("password2"),n=t.get("deviceFingerprint");if(!r||!a)return{error:"Email and password are required"};if(!i||a.toString()!==i.toString())return{error:"Passwords do not match"};let o=await s();if(!o)return{error:"Database connection failed"};try{let{data:e}=await o.auth.admin.listUsers();if(e.users.some(e=>e.email===r.toString()))return{error:"Email already registered",code:"EMAIL_EXISTS"};let t=d(),{error:i,data:s}=await o.auth.signUp({email:r.toString(),password:a.toString(),options:{emailRedirectTo:`${t}/auth/callback`,data:{email:r.toString(),registration_source:"web",device_fingerprint:n?.toString()||null}}});if(i)return{error:i.message};if(s.user){let{error:e}=await o.from("users").insert({email:s.user.email,supabase_id:s.user.id,device_fingerprint:n?.toString()||null,registration_ip:"127.0.0.1",last_ip:"127.0.0.1",is_admin:"ysnyuki2321@outlook.jp"===r.toString(),auth_provider:"email",is_verified:!1,subscription_type:"free",storage_used:0,storage_limit:0x80000000,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),email_verification_sent_at:new Date().toISOString(),verification_attempts:0});e&&console.error("[v0] Failed to insert user record:",e),console.log(`[v0] User ${s.user.email} registered successfully`)}try{let{data:e}=await o.from("admin_settings").select("setting_key, setting_value"),t=(e||[]).reduce((e,t)=>(e[t.setting_key]=t.setting_value,e),{});"true"===t.auth_auto_verify&&s.user?.email&&await o.from("users").update({is_verified:!0,supabase_id:s.user.id}).eq("email",s.user.email)}catch(e){console.warn("[v0] Failed to auto-verify user:",e)}return{success:"Check your email to confirm your account. If you don't see it, check your spam folder.",userId:s.user?.id}}catch(e){return console.error("Sign up error:",e),{error:"An unexpected error occurred. Please try again."}}}async function l(e){let t=await s();if(!t)return{error:"Database connection failed"};try{let{data:r,error:a}=await t.from("users").select("is_verified, verification_attempts, email_verification_sent_at").eq("email",e).single();if(a||!r)return{error:"User not found"};if(r.is_verified)return{error:"Email is already verified"};let i=r.email_verification_sent_at?new Date(r.email_verification_sent_at):null,n=new Date;if((i?(n.getTime()-i.getTime())/36e5:24)<1&&r.verification_attempts>=3)return{error:"Too many verification attempts. Please wait 1 hour before trying again."};let{error:s}=await t.auth.resend({type:"signup",email:e});if(s)return{error:s.message};return await t.from("users").update({email_verification_sent_at:new Date().toISOString(),verification_attempts:r.verification_attempts+1}).eq("email",e),{success:"Verification email sent! Please check your inbox and spam folder."}}catch(e){return console.error("Resend verification error:",e),{error:"Failed to send verification email. Please try again."}}}async function f(e){let t=await s();if(!t)return{error:"Database connection failed"};try{let{data:r,error:a}=await t.from("users").select("email, password_reset_attempts, password_reset_sent_at").eq("email",e).single();if(a||!r)return{success:"If an account with this email exists, you will receive a password reset link."};let i=r.password_reset_sent_at?new Date(r.password_reset_sent_at):null,n=new Date;if((i?(n.getTime()-i.getTime())/36e5:24)<1&&r.password_reset_attempts>=3)return{error:"Too many password reset attempts. Please wait 1 hour before trying again."};let s=d(),{error:o}=await t.auth.resetPasswordForEmail(e,{redirectTo:`${s}/auth/reset-password`});if(o)return{error:o.message};return await t.from("users").update({password_reset_sent_at:new Date().toISOString(),password_reset_attempts:(r.password_reset_attempts||0)+1}).eq("email",e),{success:"Password reset email sent! Please check your inbox and spam folder."}}catch(e){return console.error("Forgot password error:",e),{error:"Failed to send password reset email. Please try again."}}}async function g(){let e=await s();e&&await e.auth.signOut(),(0,o.redirect)("/auth/login")}(0,r(73734).D)([u,c,l,f,g]),(0,a.A)(u,"60a2541c447397bdff2adcda1aa27d6fda140e754e",null),(0,a.A)(c,"6006a75935538ffda01ac23a336913393062bde9e5",null),(0,a.A)(l,"40aca6f34dda9ee9328ad2d87ff81ca62a58ff21cb",null),(0,a.A)(f,"40dca538ace24181507799deb34f98758d7024e7e2",null),(0,a.A)(g,"005bd5b1efeb88d36ab0f467ace01f0a3068f30be9",null)},40274:(e,t,r)=>{r.d(t,{KX:()=>o,q:()=>s});var a=r(83918);let i=null,n=0;async function s(){let e=Date.now();if(null!==i&&e-n<3e4)return i;try{if(!process.env.NEXT_PUBLIC_SUPABASE_URL||!process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY)return i=!0,n=e,!0;let t=(0,a.UU)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY),{data:r}=await t.from("admin_settings").select("setting_key, setting_value").eq("setting_key","debug_mode").single(),s=r?.setting_value==="true";return i=s,n=e,s}catch(t){return console.warn("[Debug] Failed to check debug mode:",t),i=!0,n=e,!0}}function o(){return{id:"debug-user-123",email:"debug@yukifiles.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),subscription_type:"paid",subscription_expires_at:new Date(Date.now()+31536e6).toISOString(),quota_used:524288e3,quota_limit:0x140000000,password_hash:null,twofa_secret:null,is_verified:!0,supabase_id:"debug-user-123",auth_provider:"email",is_admin:!0,device_fingerprint:"debug-fingerprint",last_ip:"127.0.0.1",registration_ip:"127.0.0.1",is_active:!0}}},49110:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(65519).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},54686:(e,t,r)=>{r.d(t,{R:()=>n});var a=r(22057),i=r(15886);async function n(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL,t=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t)return console.warn("[Server Client] Supabase environment variables not found"),null;try{let r=await (0,i.UL)();return(0,a.createServerClient)(e,t,{cookies:{get:e=>r.get(e)?.value,set(e,t,a){try{r.set(e,t,a)}catch{}},remove(e,t){try{r.set(e,"",{...t,maxAge:0})}catch{}}}})}catch(e){return console.error("[Server Client] Error creating Supabase client:",e),null}}},56954:(e,t,r)=>{var a=r(65362);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},73121:(e,t,r)=>{r.d(t,{E:()=>d});var a=r(89812);r(49837);var i=r(1317),n=r(49602),s=r(87677);let o=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,asChild:r=!1,...n}){let d=r?i.DX:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,s.cn)(o({variant:t}),e),...n})}},78239:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(65519).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},98582:(e,t,r)=>{r.d(t,{BT:()=>d,Wu:()=>u,ZB:()=>o,Zp:()=>n,aR:()=>s});var a=r(79054);r(83263);var i=r(64603);function n({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function s({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function o({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",e),...t})}function d({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...t})}function u({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",e),...t})}}};