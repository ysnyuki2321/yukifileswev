(()=>{var e={};e.id=3698,e.ids=[3698],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4051:(e,s,t)=>{Promise.resolve().then(t.bind(t,16901))},7873:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(91660).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},16901:(e,s,t)=>{"use strict";t.d(s,{default:()=>r});let r=(0,t(430).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspace/components/admin/admin-layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspace/components/admin/admin-layout.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},39371:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(91660).A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},49125:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(65519).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},55591:e=>{"use strict";e.exports=require("https")},57365:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d});var r=t(7702),a=t(63409),i=t(88409),n=t.n(i),l=t(4102),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,58308)),"/workspace/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,81622)),"/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,56102)),"/workspace/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,60002,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,78907,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/workspace/app/admin/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},58308:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g,dynamic:()=>h});var r=t(79054),a=t(54686),i=t(77533),n=t(40274);async function l(){let e=await (0,a.R)();if(await (0,n.q)())return console.log("[v0] Debug mode enabled - bypassing admin checks"),{userData:(0,n.KX)(),isAdmin:!0};e||(0,i.redirect)("/auth/login");let{data:{user:s}}=await e.auth.getUser();s||(0,i.redirect)("/auth/login");let{data:t}=await e.from("users").select("*").eq("email",s.email).single();return t?.is_admin||(0,i.redirect)("/dashboard"),{userData:t,isAdmin:!0}}var c=t(98582),d=t(92615),o=t(20643),x=t(39371),m=t(7873),u=t(16901),p=t(14898);let h="force-dynamic";async function g(){let{userData:e}=await l(),s=await (0,a.R)(),t=await (0,n.q)(),i={};if(t)console.log("[v0] Debug mode enabled - using mock admin stats"),i=(0,p.Pf)();else{if(!s)throw Error("Supabase client not available");let[{count:e},{count:t},{count:r},{count:a},{count:n}]=await Promise.all([s.from("users").select("*",{count:"exact",head:!0}),s.from("files").select("*",{count:"exact",head:!0}),s.from("transactions").select("*",{count:"exact",head:!0}),s.from("transactions").select("*",{count:"exact",head:!0}).eq("status","pending"),s.from("ip_logs").select("*",{count:"exact",head:!0}).or("is_vpn.eq.true,is_proxy.eq.true")]);i={totalUsers:e||0,totalFiles:t||0,totalTransactions:r||0,pendingTransactions:a||0,suspiciousIPs:n||0,totalStorageUsed:0,recentUsers:[],recentTransactions:[]}}let h=[],g=[],f="0.00";if(!t&&s){let{data:e}=await s.from("transactions").select("*, users(email)").order("created_at",{ascending:!1}).limit(5),{data:t}=await s.from("users").select("*").order("created_at",{ascending:!1}).limit(5),{data:r}=await s.from("users").select("quota_used");f=((r?.reduce((e,s)=>e+(s.quota_used||0),0)||0)/0x40000000).toFixed(2),h=e||[],g=t||[]}else h=i.recentTransactions,g=i.recentUsers,f=(i.totalStorageUsed/0x40000000).toFixed(2);return(0,r.jsx)(u.default,{userData:e,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),(0,r.jsx)("p",{className:"text-gray-400",children:"System overview and management"})]}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(c.Zp,{className:"bg-black/40 backdrop-blur-lg border-purple-500/20",children:[(0,r.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-gray-300",children:"Total Users"}),(0,r.jsx)(o.A,{className:"h-4 w-4 text-purple-400"})]}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:i.totalUsers}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Registered accounts"})]})]}),(0,r.jsxs)(c.Zp,{className:"bg-black/40 backdrop-blur-lg border-purple-500/20",children:[(0,r.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-gray-300",children:"Total Files"}),(0,r.jsx)(x.A,{className:"h-4 w-4 text-purple-400"})]}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:i.totalFiles}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Uploaded files"})]})]}),(0,r.jsxs)(c.Zp,{className:"bg-black/40 backdrop-blur-lg border-purple-500/20",children:[(0,r.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-gray-300",children:"Transactions"}),(0,r.jsx)(m.A,{className:"h-4 w-4 text-purple-400"})]}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:i.totalTransactions}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[i.pendingTransactions," pending"]})]})]}),(0,r.jsxs)(c.Zp,{className:"bg-black/40 backdrop-blur-lg border-purple-500/20",children:[(0,r.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(c.ZB,{className:"text-sm font-medium text-gray-300",children:"Storage Used"}),(0,r.jsx)(x.A,{className:"h-4 w-4 text-purple-400"})]}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-white",children:[f," GB"]}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Total storage"})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)(c.Zp,{className:"bg-black/40 backdrop-blur-lg border-purple-500/20",children:[(0,r.jsxs)(c.aR,{children:[(0,r.jsx)(c.ZB,{className:"text-white",children:"Recent Users"}),(0,r.jsx)(c.BT,{children:"Latest registered users"})]}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.email}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:new Date(e.created_at).toLocaleDateString()})]}),(0,r.jsx)(d.E,{variant:"paid"===e.subscription_type?"default":"secondary",children:e.subscription_type})]},e.id))})})]}),(0,r.jsxs)(c.Zp,{className:"bg-black/40 backdrop-blur-lg border-purple-500/20",children:[(0,r.jsxs)(c.aR,{children:[(0,r.jsx)(c.ZB,{className:"text-white",children:"Recent Transactions"}),(0,r.jsx)(c.BT,{children:"Latest payment transactions"})]}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-white font-medium",children:["$",e.amount," ",e.currency]}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.users?.email||"Unknown user"})]}),(0,r.jsx)(d.E,{variant:"completed"===e.status?"default":"pending"===e.status?"secondary":"destructive",children:e.status})]},e.id))})})]})]})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64299:(e,s,t)=>{Promise.resolve().then(t.bind(t,83699))},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83699:(e,s,t)=>{"use strict";t.d(s,{default:()=>w});var r=t(89812),a=t(43394),i=t(73121),n=t(60600),l=t(78109),c=t(78239),d=t(58844),o=t(14884),x=t(82105),m=t(71226),u=t(81413),p=t(49110),h=t(49125),g=t(8679),f=t.n(g),b=t(56954),j=t(22792),v=t(49837);let y=[{name:"Dashboard",href:"/admin",icon:n.A},{name:"Users",href:"/admin/users",icon:l.A},{name:"Transactions",href:"/admin/transactions",icon:c.A},{name:"Security",href:"/admin/security",icon:d.A},{name:"Settings",href:"/admin/settings",icon:o.A}];function w({children:e,userData:s}){let t=(0,b.usePathname)(),[n,l]=(0,v.useState)(!1);return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,r.jsx)("header",{className:"border-b border-purple-500/20 bg-black/20 backdrop-blur-lg",children:(0,r.jsx)("div",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(a.$,{variant:"ghost",size:"sm",onClick:()=>l(!n),className:"lg:hidden text-gray-300 hover:text-white",children:n?(0,r.jsx)(x.A,{className:"h-5 w-5"}):(0,r.jsx)(m.A,{className:"h-5 w-5"})}),(0,r.jsxs)(f(),{href:"/admin",className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg"}),(0,r.jsx)("span",{className:"text-2xl font-bold text-white",children:"YukiFiles Admin"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(f(),{href:"/dashboard",children:(0,r.jsxs)(a.$,{variant:"ghost",className:"text-gray-300 hover:text-white",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"User Dashboard"]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-gray-300",children:s.email}),(0,r.jsx)(i.E,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-black",children:"ADMIN"})]}),(0,r.jsx)("form",{action:j.C,children:(0,r.jsxs)(a.$,{type:"submit",variant:"ghost",className:"text-gray-300 hover:text-white",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Sign Out"]})})]})]})})}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("aside",{className:`${n?"translate-x-0":"-translate-x-full"} fixed inset-y-0 left-0 z-50 w-64 bg-black/40 backdrop-blur-lg border-r border-purple-500/20 transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0`,children:(0,r.jsx)("div",{className:"flex flex-col h-full pt-20 lg:pt-6",children:(0,r.jsx)("nav",{className:"flex-1 px-4 space-y-2",children:y.map(e=>{let s=t===e.href;return(0,r.jsxs)(f(),{href:e.href,className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${s?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"text-gray-300 hover:text-white hover:bg-purple-500/10"}`,onClick:()=>l(!1),children:[(0,r.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.name,s&&(0,r.jsx)(h.A,{className:"ml-auto h-4 w-4"})]},e.name)})})})}),n&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),(0,r.jsx)("main",{className:"flex-1 lg:ml-0",children:(0,r.jsx)("div",{className:"p-6",children:e})})]})]})}},92615:(e,s,t)=>{"use strict";t.d(s,{E:()=>c});var r=t(79054);t(83263);var a=t(66959),i=t(92836),n=t(64603);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:s,asChild:t=!1,...i}){let c=t?a.DX:"span";return(0,r.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(l({variant:s}),e),...i})}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9369,6550,5392,5014,4432,8282,9441,1812],()=>t(57365));module.exports=r})();