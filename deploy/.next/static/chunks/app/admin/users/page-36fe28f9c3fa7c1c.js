(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{1590:(e,t,a)=>{"use strict";a.d(t,{default:()=>k});var r=a(2432),s=a(364),i=a(2708),n=a(7382),d=a(6765),o=a(7304),l=a(4963);function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,l.cn)("w-full caption-bottom text-sm",t),...a})})}function u(e){let{className:t,...a}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,l.cn)("[&_tr]:border-b",t),...a})}function x(e){let{className:t,...a}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,l.cn)("[&_tr:last-child]:border-0",t),...a})}function m(e){let{className:t,...a}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,l.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function h(e){let{className:t,...a}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,l.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function v(e){let{className:t,...a}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,l.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}var g=a(5033),p=a(8725),f=a(4317),b=a(4168);let y=(0,b.A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),j=(0,b.A)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var w=a(7271),N=a(2384);function k(e){let{users:t}=e,[a,b]=(0,s.useState)(t),[k,_]=(0,s.useState)(""),[A,z]=(0,s.useState)(null),C=a.filter(e=>e.email&&e.email.toLowerCase().includes(k.toLowerCase())),B=async(e,t)=>{z(e);try{(await fetch("/api/admin/users",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,action:t})})).ok&&b(a=>a.map(a=>{if(a.id===e)switch(t){case"toggle_active":return{...a,is_active:!a.is_active};case"make_admin":return{...a,is_admin:!0};case"remove_admin":return{...a,is_admin:!1};case"upgrade_premium":return{...a,subscription_type:"paid",quota_limit:0x140000000};case"downgrade_free":return{...a,subscription_type:"free",quota_limit:0x80000000}}return a}))}catch(e){console.error("User action error:",e)}finally{z(null)}};return(0,r.jsxs)(n.Zp,{className:"bg-black/40 backdrop-blur-lg border-purple-500/20",children:[(0,r.jsx)(n.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(n.ZB,{className:"text-white",children:["Users (",C.length,")"]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,r.jsx)(o.p,{placeholder:"Search users...",value:k,onChange:e=>_(e.target.value),className:"pl-10 bg-black/20 border-gray-700 text-white placeholder:text-gray-500 focus:border-purple-500"})]})})]})}),(0,r.jsx)(n.Wu,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{children:(0,r.jsxs)(m,{className:"border-gray-700",children:[(0,r.jsx)(h,{className:"text-gray-300",children:"User"}),(0,r.jsx)(h,{className:"text-gray-300",children:"Subscription"}),(0,r.jsx)(h,{className:"text-gray-300",children:"Storage"}),(0,r.jsx)(h,{className:"text-gray-300",children:"Status"}),(0,r.jsx)(h,{className:"text-gray-300",children:"Registered"}),(0,r.jsx)(h,{className:"text-gray-300",children:"Actions"})]})}),(0,r.jsx)(x,{children:C.map(e=>(0,r.jsxs)(m,{className:"border-gray-700",children:[(0,r.jsx)(v,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.email}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["ID: ",e.id.slice(0,8),"..."]}),e.is_admin&&(0,r.jsx)(d.E,{className:"bg-yellow-500 text-black text-xs mt-1",children:"Admin"})]})}),(0,r.jsx)(v,{children:(0,r.jsx)(d.E,{variant:"paid"===e.subscription_type?"default":"secondary",children:e.subscription_type})}),(0,r.jsx)(v,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(f.A,{className:"h-4 w-4 text-gray-400"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-white",children:[(0,l.z)(e.quota_used)," / ",(0,l.z)(e.quota_limit)]}),(0,r.jsx)("div",{className:"w-20 bg-gray-700 rounded-full h-1 mt-1",children:(0,r.jsx)("div",{className:"bg-purple-500 h-1 rounded-full",style:{width:"".concat(Math.min(e.quota_used/e.quota_limit*100,100),"%")}})})]})]})}),(0,r.jsx)(v,{children:(0,r.jsx)(d.E,{variant:e.is_active?"default":"destructive",children:e.is_active?"Active":"Suspended"})}),(0,r.jsx)(v,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-white",children:(0,l.Y)(e.created_at)}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["IP: ",e.registration_ip]})]})}),(0,r.jsx)(v,{children:(0,r.jsxs)(g.rI,{children:[(0,r.jsx)(g.ty,{asChild:!0,children:(0,r.jsx)(i.$,{variant:"ghost",size:"sm",disabled:A===e.id,className:"text-gray-400 hover:text-white",children:(0,r.jsx)(y,{className:"h-4 w-4"})})}),(0,r.jsxs)(g.SQ,{className:"bg-black/90 border-gray-700",children:[(0,r.jsx)(g._2,{onClick:()=>B(e.id,"toggle_active"),className:"text-gray-300 hover:text-white",children:e.is_active?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j,{className:"w-4 h-4 mr-2"}),"Suspend User"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Activate User"]})}),e.is_admin?(0,r.jsxs)(g._2,{onClick:()=>B(e.id,"remove_admin"),className:"text-gray-300 hover:text-white",children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Remove Admin"]}):(0,r.jsxs)(g._2,{onClick:()=>B(e.id,"make_admin"),className:"text-gray-300 hover:text-white",children:[(0,r.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Make Admin"]}),"free"===e.subscription_type?(0,r.jsx)(g._2,{onClick:()=>B(e.id,"upgrade_premium"),className:"text-gray-300 hover:text-white",children:"Upgrade to Premium"}):(0,r.jsx)(g._2,{onClick:()=>B(e.id,"downgrade_free"),className:"text-gray-300 hover:text-white",children:"Downgrade to Free"})]})]})})]},e.id))})]})})})]})}},2384:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(4168).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},2708:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var r=a(2432);a(364);var s=a(4793),i=a(6992),n=a(4963);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:i,asChild:o=!1,...l}=e,c=o?s.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,n.cn)(d({variant:a,size:i,className:t})),...l})}},4317:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(4168).A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},4963:(e,t,a)=>{"use strict";a.d(t,{Y:()=>d,cn:()=>i,z:()=>n});var r=a(2126),s=a(8441);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,a)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}function d(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}},5033:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>o,_2:()=>l,mB:()=>c,rI:()=>n,ty:()=>d});var r=a(2432);a(364);var s=a(8533),i=a(4963);function n(e){let{...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"dropdown-menu",...t})}function d(e){let{...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"dropdown-menu-trigger",className:"touch-manipulation",...t})}function o(e){let{className:t,sideOffset:a=4,...n}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsx)(s.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[9999] max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md","sm:z-50","touch-manipulation","data-[side=bottom]:sm:slide-in-from-top-2 data-[side=top]:sm:slide-in-from-bottom-2",t),...n})})}function l(e){let{className:t,inset:a,variant:n="default",...d}=e;return(0,r.jsx)(s.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":n,className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4","touch-manipulation","min-h-[44px] sm:min-h-[32px]","active:bg-accent/80",t),...d})}function c(e){let{className:t,...a}=e;return(0,r.jsx)(s.wv,{"data-slot":"dropdown-menu-separator",className:(0,i.cn)("bg-border -mx-1 my-1 h-px",t),...a})}},6765:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var r=a(2432);a(364);var s=a(4793),i=a(6992),n=a(4963);let d=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,asChild:i=!1,...o}=e,l=i?s.DX:"span";return(0,r.jsx)(l,{"data-slot":"badge",className:(0,n.cn)(d({variant:a}),t),...o})}},7271:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(4168).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7304:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var r=a(2432);a(364);var s=a(4963);function i(e){let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}},7382:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>l,ZB:()=>d,Zp:()=>i,aR:()=>n});var r=a(2432);a(364);var s=a(4963);function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}},9737:(e,t,a)=>{Promise.resolve().then(a.bind(a,1590))}},e=>{var t=t=>e(e.s=t);e.O(0,[5839,1564,8393,5022,5575,7358],()=>t(9737)),_N_E=e.O()}]);